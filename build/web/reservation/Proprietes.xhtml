<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Villas disponibles</title>
        <link href="../resources/css/default.css" rel="stylesheet" type="text/css" />
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"/>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous"/>
    </h:head>
    <h:body style="background-image: url(http://silviahartmann.com/background-tile-art/images/grey-repeating-background-5.jpg);
            background-repeat: repeat;">
        <f:metadata>
            <f:viewAction action="#{utilisateurController.checkLogin()}" />
        </f:metadata>
        <ui:include src="/profile/menu.xhtml" />
        <h:form class="container">
            <ui:repeat value="#{reservationController.items}" var="villa">
                <p:panel id="basic" header="#{villa.nom}" style="margin-bottom:20px;margin-top: 5px;">
                    <div class="ui-g">
                        <div class="ui-g-4">
                            <img class="img-fluid img-thumbnail mt-5" src="#{reservationController.getAssetUrl(villa.proprieteAssetss.get(0).asset.url)}"/>
                        </div>
                        <div class="ui-g-8">
                            <div class="card">
                                <div class="card-body h6">
                                    <ul class="list-group">
                                        <li class="list-group-item"><i class="fas fa-home"></i> #{villa.nom}</li>
                                        <li class="list-group-item"><i class="fas fa-info"></i> #{villa.apropos}</li>
                                        <li class="list-group-item"><i class="fas fa-map-marker-alt"></i> #{villa.ville.titre}, #{villa.pays.nom}.</li>
                                        <li class="list-group-item"><i class="fas fa-users"></i> #{villa.maximumAdultes} adultes et #{villa.maximumEnfants} enfants.</li>
                                        <li class="list-group-item"><i class="fas fa-building"></i> #{villa.nombreSallons} sallons, #{villa.nombreChambreACoucher} chambres à coucher et #{villa.nombreChambreDeBain} chambres de bain.</li>
                                        <li class="list-group-item"><i class="fas fa-dollar-sign"></i> #{villa.prix} dhs.</li>
                                    </ul>
                                    <p:commandButton action="#{reservationController.demanderReservation(villa)}" class="btn btn-primary text-white float-right mt-2" value="Réserver"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </p:panel>
            </ui:repeat>
        </h:form>
    </h:body>
</html>

